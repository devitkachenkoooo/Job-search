{
  "name": "job-search",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.xml",
      "typeVersion": 1,
      "position": [
        864,
        176
      ],
      "id": "bf8e0c2f-fa8c-49f4-95f4-f6c619a362cf",
      "name": "XML"
    },
    {
      "parameters": {
        "operation": "extractHtmlContent",
        "extractionValues": {
          "values": [
            {
              "key": "title",
              "cssSelector": ".card h2 a",
              "returnArray": true
            },
            {
              "key": "description",
              "cssSelector": ".card p",
              "returnArray": true
            },
            {
              "key": "link",
              "cssSelector": ".card h2 a",
              "returnValue": "attribute",
              "attribute": "href",
              "returnArray": true
            },
            {
              "key": "pubDate",
              "cssSelector": ".card time",
              "returnValue": "attribute",
              "attribute": "datetime",
              "returnArray": true
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.html",
      "typeVersion": 1.2,
      "position": [
        864,
        384
      ],
      "id": "51b4ea30-0e10-43fb-b280-6f39e2712403",
      "name": "HTML"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1440,
        208
      ],
      "id": "f1ecb8be-8aec-43bd-a2ba-267b19c8584d",
      "name": "Merge"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        368,
        112
      ],
      "id": "4fcc5d83-c4b2-4d66-8b22-3edd24215eac",
      "name": "When clicking ‚ÄòExecute workflow‚Äô"
    },
    {
      "parameters": {
        "model": "llama-3.3-70b-versatile",
        "options": {
          "temperature": 0
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        1920,
        384
      ],
      "id": "6b077bc5-eebc-483c-9547-bb6d1b7ae23d",
      "name": "Groq Chat Model",
      "credentials": {
        "groqApi": {
          "id": "7YNZbFiesFh7QRK1",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 3
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        352,
        -192
      ],
      "id": "dbaf345e-acae-4b3b-8f1c-827ca45427cc",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "TRUNCATE TABLE job_search_vacancies RESTART IDENTITY;",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        2608,
        -16
      ],
      "id": "7fe8163c-a443-4b36-8b1c-6ac8017bc739",
      "name": "Clear old vacancies",
      "executeOnce": true,
      "credentials": {
        "postgres": {
          "id": "AhIjajhZwpz1lMF3",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "return $('Parse AI responce').all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2848,
        -16
      ],
      "id": "b4c3c88c-a4df-4490-8e4f-0400c484879d",
      "name": "Return data for insertion"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO job_search_vacancies (title, company, link, ai_score, ai_reason)\nVALUES (\n  $${{ $json.title }}$$, \n  $${{ $json.company }}$$, \n  $${{ $json.link }}$$,\n  {{ $json.ai_score }},\n  $${{ $json.ai_reason }}$$\n);",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        3040,
        -16
      ],
      "id": "6bb4f3ef-9f53-42b2-8c04-a74d3d86c10b",
      "name": "insertinon of new vacancies",
      "credentials": {
        "postgres": {
          "id": "AhIjajhZwpz1lMF3",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// –û—Ç—Ä–∏–º—É—î–º–æ –ø–µ—Ä—à–∏–π –µ–ª–µ–º–µ–Ω—Ç –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –Ω–æ–¥–∏\nconst items = $input.all();\n\nif (items.length === 0) {\n  throw new Error(\"–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –≤—ñ–¥ AI –∞–≥–µ–Ω—Ç–∞\");\n}\n\n// –í–∏—Ç—è–≥—É—î–º–æ —Ç–µ–∫—Å—Ç –∑ –ø–æ–ª—è output (—Ü–µ —Ç–µ, —â–æ –∑–≥–µ–Ω–µ—Ä—É–≤–∞–≤ AI)\nconst rawOutput = items[0].json.output;\n\nif (!rawOutput) {\n  throw new Error(\"–ü–æ–ª–µ 'output' –ø–æ—Ä–æ–∂–Ω—î –∞–±–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ\");\n}\n\ntry {\n  // –û—á–∏—â–∞—î–º–æ –≤—ñ–¥ –º–æ–∂–ª–∏–≤–∏—Ö markdown-—Å–∏–º–≤–æ–ª—ñ–≤ (—è–∫—â–æ AI —Ä–∞–ø—Ç–æ–º –¥–æ–¥–∞–≤ ```json)\n  const cleanString = rawOutput.replace(/```json/g, '').replace(/```/g, '').trim();\n  \n  // –ü–∞—Ä—Å–∏–º–æ –≤ –º–∞—Å–∏–≤\n  const parsedData = JSON.parse(cleanString);\n\n  // –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –≤ –æ–∫—Ä–µ–º—ñ items –¥–ª—è n8n\n  return parsedData.map(item => ({\n    json: {\n      title: item.title || \"–ë–µ–∑ –Ω–∞–∑–≤–∏\",\n      company: item.company || \"–ù–µ –≤–∫–∞–∑–∞–Ω–æ\",\n      link: item.link || \"\",\n      description: item.description || \"\",\n      source: item.source || \"Unknown\",\n      ai_score: item.ai_score ? parseFloat(item.ai_score) : 0,\n      ai_reason: item.ai_reason || \"–ê–Ω–∞–ª—ñ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π\"\n    }\n  }));\n\n} catch (e) {\n  throw new Error(\"–ü–æ–º–∏–ª–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥—É: \" + e.message + \". –í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ: \" + rawOutput.substring(0, 100));\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2336,
        -16
      ],
      "id": "e6da9acb-2e86-47af-bec3-4504b5854388",
      "name": "Parse AI responce"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Act as a professional data analyst. Filter and transform the provided job list into a strictly valid JSON array.\n\n### FILTERING CRITERIA:\n1. ONLY include jobs related to: No-code, Low-code, Automation, AI, Software Development (Python, JS, etc.), or Data Engineering.\n2. EXCLUDE everything else: Sales, Marketing, HR, Logistics, Construction, or Manual Management.\n3. If no jobs match these categories, return an empty array [].\n\n### RULES:\n1. Output ONLY the raw JSON array. No explanations, no markdown blocks.\n2. Fields to create for each job:\n   - \"title\": Job title.\n   - \"company\": Company name.\n   - \"link\": Full URL.\n   - \"description\": Short summary (max 200 chars).\n   - \"source\": \"Djinni\", \"DOU\", or \"Work.ua\".\n   - \"ai_score\": Rate from 1.0 to 5.0 (5.0 is perfect for Automation/AI/n8n/No-code).\n   - \"ai_reason\": One short sentence in Ukrainian explaining why you gave this score based on the relevance to automation.\n\n### DATA TO PROCESS:\n{{ JSON.stringify($json.all_jobs) }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1968,
        0
      ],
      "id": "0f040f52-b50b-4afa-ac1e-05e8c7c79b5c",
      "name": "Agent filters and formats vacancies"
    },
    {
      "parameters": {
        "jsCode": "const allItems = $input.all();\n\nconst cleanData = allItems.map(item => {\n  const job = item.json;\n  \n  // –û—á–∏—â–∞—î–º–æ —Ç–µ–∫—Å—Ç –≤—ñ–¥ HTML-—Ç–µ–≥—ñ–≤, –∑–∞–π–≤–∏—Ö –ø–µ—Ä–µ–Ω–æ—Å—ñ–≤ —Ä—è–¥–∫—ñ–≤ —Ç–∞ –ø—Ä–æ–±—ñ–ª—ñ–≤\n  const cleanDescription = (job.content || job.contentSnippet || \"\")\n    .replace(/<[^>]*>/g, ' ') // –í–∏–¥–∞–ª—è—î–º–æ –≤—Å—ñ HTML —Ç–µ–≥–∏\n    .replace(/\\s+/g, ' ')     // –ó–∞–º—ñ–Ω—é—î–º–æ –∫—ñ–ª—å–∫–∞ –ø—Ä–æ–±—ñ–ª—ñ–≤/–µ–Ω—Ç–µ—Ä—ñ–≤ –Ω–∞ –æ–¥–∏–Ω –ø—Ä–æ–±—ñ–ª\n    .trim();\n\n  return {\n    title: job.title,\n    link: job.link,\n    // –¢–µ–ø–µ—Ä —Ç–µ–∫—Å—Ç –≤–∞–∂–∏—Ç—å –Ω–∞–±–∞–≥–∞—Ç–æ –º–µ–Ω—à–µ, –∞–ª–µ —Å–µ–Ω—Å –∑–∞–ª–∏—à–∏–≤—Å—è\n    description: cleanDescription, \n    source: job.link.includes('djinni.co') ? 'Djinni' : 'DOU'\n  };\n});\n\nreturn {\n  total_count: cleanData.length,\n  all_jobs: cleanData,\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1664,
        224
      ],
      "id": "8af3ac15-e994-4528-a1f5-abdfcb408880",
      "name": "Clean Job Feed"
    },
    {
      "parameters": {
        "url": "https://djinni.co/jobs/rss/?primary_keyword=No%20Code&exp_level=no_exp&exp_level=1y",
        "options": {}
      },
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1.2,
      "position": [
        1072,
        -32
      ],
      "id": "634e4ddf-2bdd-4b97-8f02-6c1febe4078f",
      "name": "RSS Djini",
      "notes": "–î–∂–∏–Ω—ñ –≤–∞–Ω–∞—Å—ñ—ó"
    },
    {
      "parameters": {
        "jsCode": "// –ë–µ—Ä–µ–º–æ –ø–µ—Ä—à–∏–π –æ–±'—î–∫—Ç –∑ –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö\nconst data = items[0].json;\n\nconst results = [];\n\n// –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –º–∞—Å–∏–≤—É –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ (—ó—Ö 4, —è–∫ —ñ –≤–∞–∫–∞–Ω—Å—ñ–π)\nfor (let i = 0; i < data.title.length; i++) {\n  results.push({\n    json: {\n      title: data.title[i],\n      // –í –æ–ø–∏—Å—ñ –±–µ—Ä–µ–º–æ –∫–æ–∂–µ–Ω –¥—Ä—É–≥–∏–π –µ–ª–µ–º–µ–Ω—Ç (0, 2, 4, 6), –±–æ –º—ñ–∂ –Ω–∏–º–∏ —Å–º—ñ—Ç—Ç—è\n      description: data.description[i * 2] \n        ? data.description[i * 2].replace(/\\n/g, ' ').trim() \n        : '',\n      link: 'https://www.work.ua' + data.link[i],\n      pubDate: data.pubDate[i]\n    }\n  });\n}\n\nreturn results;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1072,
        384
      ],
      "id": "0439e1b1-257c-4a95-8310-8da57b9b30fd",
      "name": "Normalize Jobs"
    },
    {
      "parameters": {
        "url": "https://www.work.ua/jobs-remote-nocode/",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        656,
        384
      ],
      "id": "de76e4b0-d203-45ad-9f35-4c53ff66457b",
      "name": "Work UA request"
    },
    {
      "parameters": {
        "url": "https://jobs.dou.ua/vacancies/feeds/?search=No%20Code&exp=0-1",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        656,
        176
      ],
      "id": "a21f5c0a-c0ce-4121-b7f3-7f239a5b5605",
      "name": "DOU request"
    },
    {
      "parameters": {
        "jsCode": "// –ú–∏ –±–µ—Ä–µ–º–æ —à–ª—è—Ö, —è–∫–∏–π —Ç–∏ –±–∞—á–∏–≤ —É —Å–µ–±–µ –≤ Output, —ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –π–æ–≥–æ –Ω–∞ —Å–ø–∏—Å–æ–∫\nconst items = $input.first().json.rss.channel.item;\n\n// –Ø–∫—â–æ –≤–∞–∫–∞–Ω—Å—ñ—è –ª–∏—à–µ –æ–¥–Ω–∞, DOU –ø—Ä–∏—Å–∏–ª–∞—î —ó—ó —è–∫ –æ–±'—î–∫—Ç. \n// –Ø–∫—â–æ –±–∞–≥–∞—Ç–æ ‚Äî —è–∫ –º–∞—Å–∏–≤. –†–æ–±–∏–º–æ, —â–æ–± –∑–∞–≤–∂–¥–∏ –±—É–≤ –º–∞—Å–∏–≤ –¥–ª—è n8n:\nreturn Array.isArray(items) ? items.map(i => ({ json: i })) : [{ json: items }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1072,
        176
      ],
      "id": "e1f1b865-7fa4-4bf9-9c60-5d4d67578037",
      "name": "Parse RSS data"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst MIN_SCORE = 4.0; \nconst LIMIT = 7; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∞–∫–∞–Ω—Å—ñ–π —É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ\n\n// 1. –§—ñ–ª—å—Ç—Ä—É—î–º–æ –∑–∞ –æ—Ü—ñ–Ω–∫–æ—é\nlet filteredJobs = items.filter(item => item.json.ai_score >= MIN_SCORE);\n\n// 2. –°–æ—Ä—Ç—É—î–º–æ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ), —â–æ–± —Å–ø–æ—á–∞—Ç–∫—É –π—à–ª–∏ –Ω–∞–π–≤–∏—â—ñ –æ—Ü—ñ–Ω–∫–∏\nfilteredJobs.sort((a, b) => b.json.ai_score - a.json.ai_score);\n\n// 3. –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ –ª—ñ–º—ñ—Ç\nconst highQualityJobs = filteredJobs.slice(0, LIMIT);\n\n// –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π—à–ª–∏ ‚Äî –≤–∏—Ö–æ–¥–∏–º–æ\nif (highQualityJobs.length === 0) {\n  return []; \n}\n\n// 4. –§–æ—Ä–º—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (HTML —Ñ–æ—Ä–º–∞—Ç)\nlet message = `üöÄ <b>–¢–û–ü-${highQualityJobs.length} –≤–∞–∫–∞–Ω—Å—ñ–π –¥–ª—è —Ç–µ–±–µ (Score ${MIN_SCORE}+):</b>\\n\\n`;\n\nfor (const item of highQualityJobs) {\n  const job = item.json;\n  message += `üî• <b>${job.title}</b> (‚≠êÔ∏è ${job.ai_score}/5)\\n`;\n  message += `üè¢ –ö–æ–º–ø–∞–Ω—ñ—è: ${job.company}\\n`;\n  message += `ü§ñ <i>${job.ai_reason}</i>\\n`;\n  message += `üîó <a href=\"${job.link}\">–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤–∞–∫–∞–Ω—Å—ñ—é</a>\\n`;\n  message += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n`;\n}\n\n// –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ–¥–∏–Ω –æ–±'—î–∫—Ç –¥–ª—è Telegram\nreturn { full_message: message };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3088,
        352
      ],
      "id": "f21045ac-f3eb-43b5-b46e-ea199072c569",
      "name": "get only higher than score 4"
    },
    {
      "parameters": {
        "text": "={{ $json.full_message }}",
        "additionalFields": {
          "parse_mode": "HTML"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3376,
        352
      ],
      "id": "44172925-cb9d-48a3-a7e5-5ba4e4f83a19",
      "name": "Send a text message",
      "webhookId": "f75a1c2a-2d3b-47a8-b02d-45e7221c4e2d"
    }
  ],
  "pinData": {},
  "connections": {
    "XML": {
      "main": [
        [
          {
            "node": "Parse RSS data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML": {
      "main": [
        [
          {
            "node": "Normalize Jobs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Clean Job Feed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "RSS Djini",
            "type": "main",
            "index": 0
          },
          {
            "node": "DOU request",
            "type": "main",
            "index": 0
          },
          {
            "node": "Work UA request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Groq Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Agent filters and formats vacancies",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "DOU request",
            "type": "main",
            "index": 0
          },
          {
            "node": "Work UA request",
            "type": "main",
            "index": 0
          },
          {
            "node": "RSS Djini",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Clear old vacancies": {
      "main": [
        [
          {
            "node": "Return data for insertion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Return data for insertion": {
      "main": [
        [
          {
            "node": "insertinon of new vacancies",
            "type": "main",
            "index": 0
          },
          {
            "node": "get only higher than score 4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "insertinon of new vacancies": {
      "main": [
        []
      ]
    },
    "Parse AI responce": {
      "main": [
        [
          {
            "node": "Clear old vacancies",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agent filters and formats vacancies": {
      "main": [
        [
          {
            "node": "Parse AI responce",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Clean Job Feed": {
      "main": [
        [
          {
            "node": "Agent filters and formats vacancies",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS Djini": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Normalize Jobs": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Work UA request": {
      "main": [
        [
          {
            "node": "HTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DOU request": {
      "main": [
        [
          {
            "node": "XML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse RSS data": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "get only higher than score 4": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "6b5f421d-aead-47aa-891f-b347f50e50e2",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "c5674022872009769c8b83e3189e707e15b254c1b9e48d6b8e871f168c7daed1"
  },
  "id": "kheOwbwnfXDgCa2Q",
  "tags": []
}